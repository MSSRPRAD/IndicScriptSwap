// use transliterate_ferris::convert::convert_indic_to_indic;
use std::time::{Duration, Instant};
use transliterate_ferris::convert::convert_indic_to_indic;
use transliterate_ferris::convert::convert_indic_to_intermediate;
use transliterate_ferris::convert::convert_indic_to_intermediate_new;
use transliterate_ferris::convert::convert_indic_to_roman;
use transliterate_ferris::convert::convert_intermediate_to_indic;
use transliterate_ferris::convert::convert_intermediate_to_roman;
use transliterate_ferris::convert::convert_roman_to_intermediate;
use transliterate_ferris::convert::convert_roman_to_intermediate_new;
use transliterate_ferris::convert::convert_roman_to_roman;
use transliterate_ferris::data::HASH_MAP;
use transliterate_ferris::read_mappings::Script;

fn main() {

    let foo = &HASH_MAP;

    let telugu: &Script = foo.get("telugu").unwrap();
    let iast: &Script = foo.get("iast").unwrap();
    // let devanagari: &Script = foo.get("devanagari").unwrap();
    // println!("{:?}", SCRIPT_INTERMEDIATE);

    let input = "తపఃస్వాధ్యాయనిరతం తపస్వీ వాగ్విదాం వరమ్ ।
    నారదం పరిపప్రచ్ఛ వాల్మీకిర్మునిపుంగవమ్ ॥ ౧ ॥
    కో న్వస్మిన్సామ్ప్రతం లోకే గుణవాన్కశ్చ వీర్యవాన్ ।
    ధర్మజ్ఞశ్చ కృతజ్ఞశ్చ సత్యవాక్యో దృఢవ్రతః ॥ ౨ ॥
    చారిత్రేణ చ కో యుక్తః సర్వభూతేషు కో హితః ।
    విద్వాన్కః కః సమర్థశ్చ కశ్చైకప్రియదర్శనః ॥ ౩ ॥
    ఆత్మవాన్కో జితక్రోధో ద్యుతిమాన్కోఽనసూయకః ।
    కస్య బిభ్యతి దేవాశ్చ జాతరోషస్య సంయుగే ॥ ౪ ॥
    ఏతదిచ్ఛామ్యహం శ్రోతుం పరం కౌతూహలం హి మే ।
    మహర్షే త్వం సమర్థోఽసి జ్ఞాతుమేవంవిధం నరమ్ ॥ ౫ ॥
    శ్రుత్వా చైతత్త్రిలోకజ్ఞో వాల్మీకేర్నారదో వచః ।
    శ్రూయతామితి చామన్త్ర్య ప్రహృష్టో వాక్యమబ్రవీత్ ॥ ౬ ॥
    బహవో దుర్లభాశ్చైవ యే త్వయా కీర్తితా గుణాః ।
    మునే వక్ష్యామ్యహం బుద్ధ్వా తైర్యుక్తః శ్రూయతాం నరః ॥ ౭ ॥
    ఇక్ష్వాకువంశప్రభవో రామో నామ జనైః శ్రుతః ।
    నియతాత్మా మహావీర్యో ద్యుతిమాన్ధృతిమాన్వశీ ॥ ౮ ॥
    బుద్ధిమాన్నీతిమాన్వాగ్మీ శ్రీమాఞ్శత్రునిబర్హణః ।
    విపులాంసో మహాబాహుః కమ్బుగ్రీవో మహాహనుః ॥ ౯ ॥
    మహోరస్కో మహేష్వాసో గూఢజత్రురరిందమః ।
    ఆజానుబాహుః సుశిరాః సులలాటః సువిక్రమః ॥ ౧౦ ॥
    సమః సమవిభక్తాఙ్గః స్నిగ్ధవర్ణః ప్రతాపవాన్ ।
    పీనవక్షా విశాలాక్షో లక్ష్మీవాఞ్శుభలక్షణః ॥ ౧౧ ॥
    ధర్మజ్ఞః సత్యసంధశ్చ ప్రజానాం చ హితే రతః ।
    యశస్వీ జ్ఞానసంపన్నః శుచిర్వశ్యః సమాధిమాన్ ॥ ౧౨ ॥
    రక్షితా జీవలోకస్య ధర్మస్య పరిరక్షితా ।
    వేదవేదాఙ్గతత్త్వజ్ఞో ధనుర్వేదే చ నిష్ఠితః ॥ ౧౩ ॥
    సర్వశాస్త్రార్థతత్త్వజ్ఞ స్మృతిమాన్ప్రతిభానవాన్ ।
    సర్వలోకప్రియః సాధురదీనాత్మా విచక్షణః ॥ ౧౪ ॥
    సర్వదాభిగతః సద్భిః సముద్ర ఇవ సిన్ధుభిః ।
    ఆర్యః సర్వసమశ్చైవ సదైకప్రియదర్శనః ॥ ౧౫ ॥
    స చ సర్వగుణోపేతః కౌసల్యానన్దవర్ధనః ।
    సముద్ర ఇవ గామ్భీర్యే ధైర్యేణ హిమవానివ ॥ ౧౬ ॥
    విష్ణునా సదృశో వీర్యే సోమవత్ప్రియదర్శనః ।
    కాలాగ్నిసదృశః క్రోధే క్షమయా పృథివీసమః ॥ ౧౭ ॥
    ధనదేన సమస్త్యాగే సత్యే ధర్మ ఇవాపరః ।
    తమేవంగుణసంపన్నం రామం సత్యపరాక్రమమ్ ॥ ౧౮ ॥
    జ్యేష్ఠం శ్రేష్ఠగుణైర్యుక్తం ప్రియం దశరథః సుతమ్ ।
    యౌవరాజ్యేన సంయోక్తుమైచ్ఛత్ప్రీత్యా మహీపతిః ॥ ౧౯ ॥
    తస్యాభిషేకసంభారాన్దృష్ట్వా భార్యాథ కైకయీ ।
    పూర్వం దత్తవరా దేవీ వరమేనమయాచత ।
    వివాసనం చ రామస్య భరతస్యాభిషేచనమ్ ॥ ౨౦ ॥
    స సత్యవచనాద్రాజా ధర్మపాశేన సంయతః ।
    వివాసయామాస సుతం రామం దశరథః ప్రియమ్ ॥ ౨౧ ॥
    స జగామ వనం వీరః ప్రతిజ్ఞామనుపాలయన్ ।
    పితుర్వచననిర్దేశాత్కైకేయ్యాః ప్రియకారణాత్ ॥ ౨౨ ॥
    తం వ్రజన్తం ప్రియో భ్రాతా లక్ష్మణోఽనుజగామ హ ।
    స్నేహాద్వినయసంపన్నః సుమిత్రానన్దవర్ధనః ॥ ౨౩ ॥
    సర్వలక్షణసంపన్నా నారీణాముత్తమా వధూః ।
    సీతాప్యనుగతా రామం శశినం రోహిణీ యథా ॥ ౨౪ ॥
    పౌరైరనుగతో దూరం పిత్రా దశరథేన చ ।
    శృఙ్గవేరపురే సూతం గఙ్గాకూలే వ్యసర్జయత్ ॥ ౨౫ ॥
    తే వనేన వనం గత్వా నదీస్తీర్త్వా బహూదకాః ।
    చిత్రకూటమనుప్రాప్య భరద్వాజస్య శాసనాత్ ॥ ౨౬ ॥
    రమ్యమావసథం కృత్వా రమమాణా వనే త్రయః ।
    దేవగన్ధర్వసంకాశాస్తత్ర తే న్యవసన్సుఖమ్ ॥ ౨౭ ॥
    చిత్రకూటం గతే రామే పుత్రశోకాతురస్తదా ।
    రాజా దశరథః స్వర్గం జగామ విలపన్సుతమ్ ॥ ౨౮ ॥
    మృతే తు తస్మిన్భరతో వసిష్ఠప్రముఖైర్ద్విజైః ।
    నియుజ్యమానో రాజ్యాయ నైచ్ఛద్రాజ్యం మహాబలః ।
    స జగామ వనం వీరో రామపాదప్రసాదకః ॥ ౨౯ ॥
    పాదుకే చాస్య రాజ్యాయ న్యాసం దత్త్వా పునః పునః ।
    నివర్తయామాస తతో భరతం భరతాగ్రజః ॥ ౩౦ ॥
    స కామమనవాప్యైవ రామపాదావుపస్పృశన్ ।
    నన్దిగ్రామేఽకరోద్రాజ్యం రామాగమనకాఙ్క్షయా ॥ ౩౧ ॥
    రామస్తు పునరాలక్ష్య నాగరస్య జనస్య చ ।
    తత్రాగమనమేకాగ్రే దణ్డకాన్ప్రవివేశ హ ॥ ౩౨ ॥
    విరాధం రాక్షసం హత్వా శరభఙ్గం దదర్శ హ ।
    సుతీక్ష్ణం చాప్యగస్త్యం చ అగస్త్య భ్రాతరం తథా ॥ ౩౩ ॥
    అగస్త్యవచనాచ్చైవ జగ్రాహైన్ద్రం శరాసనమ్ ।
    ఖడ్గం చ పరమప్రీతస్తూణీ చాక్షయసాయకౌ ॥ ౩౪ ॥
    వసతస్తస్య రామస్య వనే వనచరైః సహ ।
    ఋషయోఽభ్యాగమన్సర్వే వధాయాసురరక్షసామ్ ॥ ౩౫ ॥
    తేన తత్రైవ వసతా జనస్థాననివాసినీ ।
    విరూపితా శూర్పణఖా రాక్షసీ కామరూపిణీ ॥ ౩౬ ॥
    తతః శూర్పణఖావాక్యాదుద్యుక్తాన్సర్వరాక్షసాన్ ।
    ఖరం త్రిశిరసం చైవ దూషణం చైవ రాక్షసమ్ ॥ ౩౭ ॥
    నిజఘాన రణే రామస్తేషాం చైవ పదానుగాన్ ।
    రక్షసాం నిహతాన్యాసన్సహస్రాణి చతుర్దశ ॥ ౩౮ ॥
    తతో జ్ఞాతివధం శ్రుత్వా రావణః క్రోధమూర్ఛితః ।
    సహాయం వరయామాస మారీచం నామ రాక్షసమ్ ॥ ౩౯ ॥
    వార్యమాణః సుబహుశో మారీచేన స రావణః ।
    న విరోధో బలవతా క్షమో రావణ తేన తే ॥ ౪౦ ॥
    అనాదృత్య తు తద్వాక్యం రావణః కాలచోదితః ।
    జగామ సహమారీచస్తస్యాశ్రమపదం తదా ॥ ౪౧ ॥
    తేన మాయావినా దూరమపవాహ్య నృపాత్మజౌ ।
    జహార భార్యాం రామస్య గృధ్రం హత్వా జటాయుషమ్ ॥ ౪౨ ॥
    గృధ్రం చ నిహతం దృష్ట్వా హృతాం శ్రుత్వా చ మైథిలీమ్ ।
    రాఘవః శోకసంతప్తో విలలాపాకులేన్ద్రియః ॥ ౪౩ ॥
    తతస్తేనైవ శోకేన గృధ్రం దగ్ధ్వా జటాయుషమ్ ।
    మార్గమాణో వనే సీతాం రాక్షసం సందదర్శ హ ॥ ౪౪ ॥
    కబన్ధం నామ రూపేణ వికృతం ఘోరదర్శనమ్ ।
    తం నిహత్య మహాబాహుర్దదాహ స్వర్గతశ్చ సః ॥ ౪౫ ॥
    స చాస్య కథయామాస శబరీం ధర్మచారిణీమ్ ।
    శ్రమణీం ధర్మనిపుణామభిగచ్ఛేతి రాఘవ ।
    సోఽభ్యగచ్ఛన్మహాతేజాః శబరీం శత్రుసూదనః ॥ ౪౬ ॥
    శబర్యా పూజితః సమ్యగ్రామో దశరథాత్మజః ।
    పమ్పాతీరే హనుమతా సంగతో వానరేణ హ ॥ ౪౭ ॥
    హనుమద్వచనాచ్చైవ సుగ్రీవేణ సమాగతః ।
    సుగ్రీవాయ చ తత్సర్వం శంసద్రామో మహాబలః ॥ ౪౮ ॥
    తతో వానరరాజేన వైరానుకథనం ప్రతి ।
    రామాయావేదితం సర్వం ప్రణయాద్దుఃఖితేన చ ।
    వాలినశ్చ బలం తత్ర కథయామాస వానరః ॥ ౪౯ ॥
    ప్రతిజ్ఞాతం చ రామేణ తదా వాలివధం ప్రతి ।
    సుగ్రీవః శఙ్కితశ్చాసీన్నిత్యం వీర్యేణ రాఘవే ॥ ౫౦ ॥
    రాఘవః ప్రత్యయార్థం తు దున్దుభేః కాయముత్తమమ్ ।
    పాదాఙ్గుష్ఠేన చిక్షేప సంపూర్ణం దశయోజనమ్ ॥ ౫౧ ॥
    బిభేద చ పునః సాలాన్సప్తైకేన మహేషుణా ।
    గిరిం రసాతలం చైవ జనయన్ప్రత్యయం తదా ॥ ౫౨ ॥
    తతః ప్రీతమనాస్తేన విశ్వస్తః స మహాకపిః ।
    కిష్కిన్ధాం రామసహితో జగామ చ గుహాం తదా ॥ ౫౩ ॥
    తతోఽగర్జద్ధరివరః సుగ్రీవో హేమపిఙ్గలః ।
    తేన నాదేన మహతా నిర్జగామ హరీశ్వరః ॥ ౫౪ ॥
    తతః సుగ్రీవవచనాద్ధత్వా వాలినమాహవే ।
    సుగ్రీవమేవ తద్రాజ్యే రాఘవః ప్రత్యపాదయత్ ॥ ౫౫ ॥
    స చ సర్వాన్సమానీయ వానరాన్వానరర్షభః ।
    దిశః ప్రస్థాపయామాస దిదృక్షుర్జనకాత్మజామ్ ॥ ౫౬ ॥
    తతో గృధ్రస్య వచనాత్సంపాతేర్హనుమాన్బలీ ।
    శతయోజనవిస్తీర్ణం పుప్లువే లవణార్ణవమ్ ॥ ౫౭ ॥
    తత్ర లఙ్కాం సమాసాద్య పురీం రావణపాలితామ్ ।
    దదర్శ సీతాం ధ్యాయన్తీమశోకవనికాం గతామ్ ॥ ౫౮ ॥
    నివేదయిత్వాభిజ్ఞానం ప్రవృత్తిం చ నివేద్య చ ।
    సమాశ్వాస్య చ వైదేహీం మర్దయామాస తోరణమ్ ॥ ౫౯ ॥
    పఞ్చ సేనాగ్రగాన్హత్వా సప్త మన్త్రిసుతానపి ।
    శూరమక్షం చ నిష్పిష్య గ్రహణం సముపాగమత్ ॥ ౬౦ ॥
    అస్త్రేణోన్ముహమాత్మానం జ్ఞాత్వా పైతామహాద్వరాత్ ।
    మర్షయన్రాక్షసాన్వీరో యన్త్రిణస్తాన్యదృచ్ఛయా ॥ ౬౧ ॥
    తతో దగ్ధ్వా పురీం లఙ్కామృతే సీతాం చ మైథిలీమ్ ।
    రామాయ ప్రియమాఖ్యాతుం పునరాయాన్మహాకపిః ॥ ౬౨ ॥
    సోఽభిగమ్య మహాత్మానం కృత్వా రామం ప్రదక్షిణమ్ ।
    న్యవేదయదమేయాత్మా దృష్టా సీతేతి తత్త్వతః ॥ ౬౩ ॥
    తతః సుగ్రీవసహితో గత్వా తీరం మహోదధేః ।
    సముద్రం క్షోభయామాస శరైరాదిత్యసంనిభైః ॥ ౬౪ ॥
    దర్శయామాస చాత్మానం సముద్రః సరితాం పతిః ।
    సముద్రవచనాచ్చైవ నలం సేతుమకారయత్ ॥ ౬౫ ॥
    తేన గత్వా పురీం లఙ్కాం హత్వా రావణమాహవే ।
    అభ్యషిఞ్చత్స లఙ్కాయాం రాక్షసేన్ద్రం విభీషణమ్ ॥ ౬౬ ॥
    కర్మణా తేన మహతా త్రైలోక్యం సచరాచరమ్ ।
    సదేవర్షిగణం తుష్టం రాఘవస్య మహాత్మనః ॥ ౬౭ ॥
    తథా పరమసంతుష్టైః పూజితః సర్వదైవతైః ।
    కృతకృత్యస్తదా రామో విజ్వరః ప్రముమోద హ ॥ ౬౮ ॥
    దేవతాభ్యో వరాన్ప్రాప్య సముత్థాప్య చ వానరాన్ ।
    పుష్పకం తత్సమారుహ్య నన్దిగ్రామం యయౌ తదా ॥ ౬౯ ॥
    నన్దిగ్రామే జటాం హిత్వా భ్రాతృభిః సహితోఽనఘః ।
    రామః సీతామనుప్రాప్య రాజ్యం పునరవాప్తవాన్ ॥ ౭౦ ॥
    ప్రహృష్టముదితో లోకస్తుష్టః పుష్టః సుధార్మికః ।
    నిరాయమో అరోగశ్చ దుర్భిక్షభయవర్జితః ॥ ౭౧ ॥
    న పుత్రమరణం కేచిద్ద్రక్ష్యన్తి పురుషాః క్వచిత్ ।
    నార్యశ్చావిధవా నిత్యం భవిష్యన్తి పతివ్రతాః ॥ ౭౨ ॥
    న వాతజం భయం కించిన్నాప్సు మజ్జన్తి జన్తవః ।
    న చాగ్రిజం భయం కించిద్యథా కృతయుగే తథా ॥ ౭౩ ॥
    అశ్వమేధశతైరిష్ట్వా తథా బహుసువర్ణకైః ।
    గవాం కోట్యయుతం దత్త్వా విద్వద్భ్యో విధిపూర్వకమ్ ॥ ౭౪ ॥
    రాజవంశాఞ్శతగుణాన్స్థాపయిష్యతి రాఘవః ।
    చాతుర్వర్ణ్యం చ లోకేఽస్మిన్స్వే స్వే ధర్మే నియోక్ష్యతి ॥ ౭౫ ॥
    దశవర్షసహస్రాణి దశవర్షశతాని చ ।
    రామో రాజ్యముపాసిత్వా బ్రహ్మలోకం గమిష్యతి ॥ ౭౬ ॥
    ఇదం పవిత్రం పాపఘ్నం పుణ్యం వేదైశ్చ సంమితమ్ ।
    యః పఠేద్రామచరితం సర్వపాపైః ప్రముచ్యతే ॥ ౭౭ ॥
    ఏతదాఖ్యానమాయుష్యం పఠన్రామాయణం నరః ।
    సపుత్రపౌత్రః సగణః ప్రేత్య స్వర్గే మహీయతే ॥ ౭౮ ॥
    పఠన్ద్విజో వాగృషభత్వమీయాత్స్యాత్క్షత్రియో భూమిపతిత్వమీయాత్ ।
    వణిగ్జనః పణ్యఫలత్వమీయాజ్జనశ్చ శూద్రోఽపి మహత్త్వమీయాత్ ॥ ౭౯ ॥";
    let mut start = Instant::now();
    let intermediate = convert_indic_to_intermediate_new(input, telugu);
    println!("Converting 2 intermediate new: {:?}", start.elapsed());
    start = Instant::now();
    let _ = convert_indic_to_intermediate(input, telugu);
    println!("Converting 2 intermediate old: {:?}", start.elapsed());
    let intermediate1 = intermediate.clone();
    start = Instant::now();
    let converted = convert_intermediate_to_roman(intermediate, iast);
    println!("Converting from intermediate: {:?}", start.elapsed());
    start = Instant::now();
    let _ = convert_indic_to_roman(&input, telugu, iast);
    println!("time to convert directly: {:?}", start.elapsed());
    println!("{}", converted);
    println!("intermediate: {:?}", intermediate1);
}
